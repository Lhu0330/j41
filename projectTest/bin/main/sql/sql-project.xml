<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis/org//DTD Mapper 3.0//EN"
"http:/mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bitc.mapper.ProjectMapper">


	<select id="selectJrList" resultType="com.bitc.dto.ProjectDto">
		
		<![CDATA[ 
			SELECT
				product_idx, product_name, product_price, product_category_idx
			FROM
				product		
				
			ORDER BY
				product_category_idx
		]]>
	</select>
	

	<select id="selectList" resultType="com.bitc.dto.ProjectDto">
		
		<![CDATA[ 
			SELECT
				product_idx, product_name, product_category_idx, product_price
			FROM
				product		
			
		]]>
	</select>

		<select id="selectBoardDetail" parameterType="int" resultType="com.bitc.dto.ProjectDto">
		<![CDATA[
			SELECT
				product_idx, product_name, product_price
			FROM
				t_board
			WHERE
				 product_category_idx = #{productCategoryIdx}
		]]>
	</select>
	
		<select id="selectBoardFileList" parameterType="int" resultType="com.bitc.dto.ProductFileDto">
		<![CDATA[
			SELECT
				file_idx, board_idx, original_file_name, stored_file_path,
				FORMAT(ROUND(file_size / 1024), 0) AS file_size
			FROM
				product_file
			WHERE
				board_idx = #{boradIdx}

		]]>
	</select>
	
	<!-- 지정한 글번호에 첨부된 파일 목록 불러오기 -->
	<select id="selectBoardFileInfo" parameterType="map" resultType="com.bitc.dto.ProductFileDto">
		<![CDATA[
			SELECT
				original_file_name, stored_file_path, file_size
			FROM
				product_file
			WHERE
				product_idx = #{productIdx}
			
		]]>
	</select>

</mapper>
